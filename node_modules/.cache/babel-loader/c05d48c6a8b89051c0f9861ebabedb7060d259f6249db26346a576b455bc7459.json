{"ast":null,"code":"// nightland/src/modules/utils.js\nexport function moveToward(entity, targetX, targetY, speed = 1) {\n  let dx = targetX - entity.x;\n  let dy = targetY - entity.y;\n  let stepsX = Math.min(Math.abs(dx), speed) * (dx > 0 ? 1 : dx < 0 ? -1 : 0);\n  let stepsY = Math.min(Math.abs(dy), speed) * (dy > 0 ? 1 : dy < 0 ? -1 : 0);\n  entity.x = Math.max(0, Math.min(20 - 1, entity.x + stepsX));\n  entity.y = Math.max(0, Math.min(40 - 1, entity.y + stepsY));\n}\nexport function updateCombatDialogs(playerComment = \"\", enemyComments = [], player, monsters) {\n  return {\n    player: {\n      name: player.name,\n      hp: player.hp,\n      comment: playerComment\n    },\n    enemies: monsters.map((m, i) => m ? {\n      name: m.name,\n      hp: Math.max(0, m.hp),\n      comment: enemyComments[i] || \"\",\n      dead: m.hp <= 0\n    } : null)\n  };\n}\nexport function updateStatusBar(player) {\n  return {\n    hp: player.hp\n  };\n}","map":{"version":3,"names":["moveToward","entity","targetX","targetY","speed","dx","x","dy","y","stepsX","Math","min","abs","stepsY","max","updateCombatDialogs","playerComment","enemyComments","player","monsters","name","hp","comment","enemies","map","m","i","dead","updateStatusBar"],"sources":["/mnt/devplex/Nightland/nightland/src/modules/utils.js"],"sourcesContent":["// nightland/src/modules/utils.js\nexport function moveToward(entity, targetX, targetY, speed = 1) {\n    let dx = targetX - entity.x;\n    let dy = targetY - entity.y;\n    let stepsX = Math.min(Math.abs(dx), speed) * (dx > 0 ? 1 : dx < 0 ? -1 : 0);\n    let stepsY = Math.min(Math.abs(dy), speed) * (dy > 0 ? 1 : dy < 0 ? -1 : 0);\n\n    entity.x = Math.max(0, Math.min(20 - 1, entity.x + stepsX));\n    entity.y = Math.max(0, Math.min(40 - 1, entity.y + stepsY));\n}\n\nexport function updateCombatDialogs(playerComment = \"\", enemyComments = [], player, monsters) {\n    return {\n        player: { name: player.name, hp: player.hp, comment: playerComment },\n        enemies: monsters.map((m, i) => m ? { name: m.name, hp: Math.max(0, m.hp), comment: enemyComments[i] || \"\", dead: m.hp <= 0 } : null)\n    };\n}\n\nexport function updateStatusBar(player) {\n    return { hp: player.hp };\n}"],"mappings":"AAAA;AACA,OAAO,SAASA,UAAUA,CAACC,MAAM,EAAEC,OAAO,EAAEC,OAAO,EAAEC,KAAK,GAAG,CAAC,EAAE;EAC5D,IAAIC,EAAE,GAAGH,OAAO,GAAGD,MAAM,CAACK,CAAC;EAC3B,IAAIC,EAAE,GAAGJ,OAAO,GAAGF,MAAM,CAACO,CAAC;EAC3B,IAAIC,MAAM,GAAGC,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAACP,EAAE,CAAC,EAAED,KAAK,CAAC,IAAIC,EAAE,GAAG,CAAC,GAAG,CAAC,GAAGA,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;EAC3E,IAAIQ,MAAM,GAAGH,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAACL,EAAE,CAAC,EAAEH,KAAK,CAAC,IAAIG,EAAE,GAAG,CAAC,GAAG,CAAC,GAAGA,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;EAE3EN,MAAM,CAACK,CAAC,GAAGI,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEJ,IAAI,CAACC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAEV,MAAM,CAACK,CAAC,GAAGG,MAAM,CAAC,CAAC;EAC3DR,MAAM,CAACO,CAAC,GAAGE,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEJ,IAAI,CAACC,GAAG,CAAC,EAAE,GAAG,CAAC,EAAEV,MAAM,CAACO,CAAC,GAAGK,MAAM,CAAC,CAAC;AAC/D;AAEA,OAAO,SAASE,mBAAmBA,CAACC,aAAa,GAAG,EAAE,EAAEC,aAAa,GAAG,EAAE,EAAEC,MAAM,EAAEC,QAAQ,EAAE;EAC1F,OAAO;IACHD,MAAM,EAAE;MAAEE,IAAI,EAAEF,MAAM,CAACE,IAAI;MAAEC,EAAE,EAAEH,MAAM,CAACG,EAAE;MAAEC,OAAO,EAAEN;IAAc,CAAC;IACpEO,OAAO,EAAEJ,QAAQ,CAACK,GAAG,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAG;MAAEL,IAAI,EAAEK,CAAC,CAACL,IAAI;MAAEC,EAAE,EAAEX,IAAI,CAACI,GAAG,CAAC,CAAC,EAAEW,CAAC,CAACJ,EAAE,CAAC;MAAEC,OAAO,EAAEL,aAAa,CAACS,CAAC,CAAC,IAAI,EAAE;MAAEC,IAAI,EAAEF,CAAC,CAACJ,EAAE,IAAI;IAAE,CAAC,GAAG,IAAI;EACxI,CAAC;AACL;AAEA,OAAO,SAASO,eAAeA,CAACV,MAAM,EAAE;EACpC,OAAO;IAAEG,EAAE,EAAEH,MAAM,CAACG;EAAG,CAAC;AAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}