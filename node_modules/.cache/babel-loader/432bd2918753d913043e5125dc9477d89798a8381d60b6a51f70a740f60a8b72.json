{"ast":null,"code":"// scripts/events.js (module)\nimport { gameState } from './gameState.js';\nexport function setupEventListeners(audio, statusBar, gameContainer, renderMap, movePlayer, combatStep, showPrincessScreen, startGame, showInfoBox, toggleSettings, toggleSFX) {\n  document.addEventListener('DOMContentLoaded', () => {\n    const splashButton = document.getElementById('splash-button');\n    splashButton.addEventListener('click', () => {\n      if (!gameState.audioStarted) {\n        audio.play().then(() => {\n          gameState.audioStarted = true;\n        }).catch(err => {});\n      }\n      showPrincessScreen(statusBar);\n    });\n    document.getElementById('princess-button').addEventListener('click', () => startGame(statusBar, gameContainer, renderMap));\n    document.getElementById('player').addEventListener('click', () => showInfoBox(gameState.player, infoBox));\n    document.getElementById('abhuman').addEventListener('click', () => {\n      var _gameState$abhuman;\n      return ((_gameState$abhuman = gameState.abhuman) === null || _gameState$abhuman === void 0 ? void 0 : _gameState$abhuman.active) && showInfoBox(gameState.abhuman, infoBox);\n    });\n    document.getElementById('watcher').addEventListener('click', () => showInfoBox(gameState.watcherSe, infoBox));\n    document.getElementById('redoubt').addEventListener('click', () => showInfoBox(gameState.redoubt, infoBox));\n    document.getElementById('gear-icon').addEventListener('click', event => {\n      toggleSettings(event);\n    });\n    const sfxToggle = document.getElementById('sfx-toggle');\n    if (sfxToggle) {\n      sfxToggle.addEventListener('change', () => {\n        toggleSFX();\n      });\n    }\n    document.addEventListener('keydown', event => {\n      console.log(\"Key pressed:\", event.key);\n      if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) {\n        event.preventDefault();\n        movePlayer(event.key);\n      } else if (event.key === ' ') {\n        event.preventDefault();\n        if (gameState.inCombat) {\n          combatStep();\n        } else {\n          document.getElementById('combat-player').style.display = 'none';\n          for (let i = 1; i <= 4; i++) {\n            const enemyDiv = document.getElementById(`combat-enemy${i}`);\n            if (enemyDiv) enemyDiv.style.display = 'none';\n          }\n        }\n      }\n    });\n  });\n}","map":{"version":3,"names":["gameState","setupEventListeners","audio","statusBar","gameContainer","renderMap","movePlayer","combatStep","showPrincessScreen","startGame","showInfoBox","toggleSettings","toggleSFX","document","addEventListener","splashButton","getElementById","audioStarted","play","then","catch","err","player","infoBox","_gameState$abhuman","abhuman","active","watcherSe","redoubt","event","sfxToggle","console","log","key","includes","preventDefault","inCombat","style","display","i","enemyDiv"],"sources":["/mnt/devplex/Nightland/nightland/src/modules/events.js"],"sourcesContent":["// scripts/events.js (module)\nimport { gameState } from './gameState.js';\n\nexport function setupEventListeners(audio, statusBar, gameContainer, renderMap, movePlayer, combatStep, showPrincessScreen, startGame, showInfoBox, toggleSettings, toggleSFX) {\n    document.addEventListener('DOMContentLoaded', () => {\n        const splashButton = document.getElementById('splash-button');\n        splashButton.addEventListener('click', () => {\n            if (!gameState.audioStarted) {\n                audio.play().then(() => {\n                    gameState.audioStarted = true;\n                }).catch(err => {});\n            }\n            showPrincessScreen(statusBar);\n        });\n\n        document.getElementById('princess-button').addEventListener('click', () => startGame(statusBar, gameContainer, renderMap));\n\n        document.getElementById('player').addEventListener('click', () => showInfoBox(gameState.player, infoBox));\n        document.getElementById('abhuman').addEventListener('click', () => gameState.abhuman?.active && showInfoBox(gameState.abhuman, infoBox));\n        document.getElementById('watcher').addEventListener('click', () => showInfoBox(gameState.watcherSe, infoBox));\n        document.getElementById('redoubt').addEventListener('click', () => showInfoBox(gameState.redoubt, infoBox));\n        document.getElementById('gear-icon').addEventListener('click', (event) => {\n            toggleSettings(event);\n        });\n\n        const sfxToggle = document.getElementById('sfx-toggle');\n        if (sfxToggle) {\n            sfxToggle.addEventListener('change', () => {\n                toggleSFX();\n            });\n        }\n\n        document.addEventListener('keydown', (event) => {\n            console.log(\"Key pressed:\", event.key);\n            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) {\n                event.preventDefault();\n                movePlayer(event.key);\n            } else if (event.key === ' ') {\n                event.preventDefault();\n                if (gameState.inCombat) {\n                    combatStep();\n                } else {\n                    document.getElementById('combat-player').style.display = 'none';\n                    for (let i = 1; i <= 4; i++) {\n                        const enemyDiv = document.getElementById(`combat-enemy${i}`);\n                        if (enemyDiv) enemyDiv.style.display = 'none';\n                    }\n                }\n            }\n        });\n    });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}