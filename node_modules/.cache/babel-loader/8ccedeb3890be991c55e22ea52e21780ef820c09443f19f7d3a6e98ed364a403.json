{"ast":null,"code":"// nightland/src/modules/gameLoop.js\nexport const handleMovePlayer = (state, dispatch, key, showDialog) => {\n  const moveDistance = 40; // Match tileSize or element size (40px as in your styles)\n  const newPosition = {\n    ...state.player.position\n  };\n  switch (key) {\n    case 'ArrowUp':\n      newPosition.y = Math.max(0, newPosition.y - moveDistance); // Prevent going off top\n      break;\n    case 'ArrowDown':\n      newPosition.y = Math.min(15960, newPosition.y + moveDistance); // Prevent going off bottom (16000 - 40)\n      break;\n    case 'ArrowLeft':\n      newPosition.x = Math.max(0, newPosition.x - moveDistance); // Prevent going off left\n      break;\n    case 'ArrowRight':\n      newPosition.x = Math.min(15960, newPosition.x + moveDistance); // Prevent going off right (16000 - 40)\n      break;\n    default:\n      return;\n  }\n  dispatch({\n    type: 'MOVE_PLAYER',\n    payload: {\n      position: newPosition\n    }\n  });\n\n  // Update DOM element position\n  const player = document.querySelector('#player');\n  if (player) {\n    player.style.left = `${newPosition.x}px`;\n    player.style.top = `${newPosition.y}px`;\n    player.style.transform = 'none'; // Remove transform for absolute positioning\n  }\n  showDialog(`Player moved ${key.toLowerCase().replace('arrow', '')}`);\n};\nexport const handleCombatStep = (state, dispatch, showDialog) => {\n  console.log('Combat step executed');\n  // Add combat logic here if needed\n};","map":{"version":3,"names":["handleMovePlayer","state","dispatch","key","showDialog","moveDistance","newPosition","player","position","y","Math","max","min","x","type","payload","document","querySelector","style","left","top","transform","toLowerCase","replace","handleCombatStep","console","log"],"sources":["/mnt/devplex/Nightland/nightland/src/modules/gameLoop.js"],"sourcesContent":["// nightland/src/modules/gameLoop.js\nexport const handleMovePlayer = (state, dispatch, key, showDialog) => {\n    const moveDistance = 40; // Match tileSize or element size (40px as in your styles)\n    const newPosition = { ...state.player.position };\n\n    switch (key) {\n        case 'ArrowUp':\n            newPosition.y = Math.max(0, newPosition.y - moveDistance); // Prevent going off top\n            break;\n        case 'ArrowDown':\n            newPosition.y = Math.min(15960, newPosition.y + moveDistance); // Prevent going off bottom (16000 - 40)\n            break;\n        case 'ArrowLeft':\n            newPosition.x = Math.max(0, newPosition.x - moveDistance); // Prevent going off left\n            break;\n        case 'ArrowRight':\n            newPosition.x = Math.min(15960, newPosition.x + moveDistance); // Prevent going off right (16000 - 40)\n            break;\n        default:\n            return;\n    }\n\n    dispatch({ type: 'MOVE_PLAYER', payload: { position: newPosition } });\n\n    // Update DOM element position\n    const player = document.querySelector('#player');\n    if (player) {\n        player.style.left = `${newPosition.x}px`;\n        player.style.top = `${newPosition.y}px`;\n        player.style.transform = 'none'; // Remove transform for absolute positioning\n    }\n\n    showDialog(`Player moved ${key.toLowerCase().replace('arrow', '')}`);\n};\n\nexport const handleCombatStep = (state, dispatch, showDialog) => {\n    console.log('Combat step executed');\n    // Add combat logic here if needed\n};"],"mappings":"AAAA;AACA,OAAO,MAAMA,gBAAgB,GAAGA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,UAAU,KAAK;EAClE,MAAMC,YAAY,GAAG,EAAE,CAAC,CAAC;EACzB,MAAMC,WAAW,GAAG;IAAE,GAAGL,KAAK,CAACM,MAAM,CAACC;EAAS,CAAC;EAEhD,QAAQL,GAAG;IACP,KAAK,SAAS;MACVG,WAAW,CAACG,CAAC,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEL,WAAW,CAACG,CAAC,GAAGJ,YAAY,CAAC,CAAC,CAAC;MAC3D;IACJ,KAAK,WAAW;MACZC,WAAW,CAACG,CAAC,GAAGC,IAAI,CAACE,GAAG,CAAC,KAAK,EAAEN,WAAW,CAACG,CAAC,GAAGJ,YAAY,CAAC,CAAC,CAAC;MAC/D;IACJ,KAAK,WAAW;MACZC,WAAW,CAACO,CAAC,GAAGH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEL,WAAW,CAACO,CAAC,GAAGR,YAAY,CAAC,CAAC,CAAC;MAC3D;IACJ,KAAK,YAAY;MACbC,WAAW,CAACO,CAAC,GAAGH,IAAI,CAACE,GAAG,CAAC,KAAK,EAAEN,WAAW,CAACO,CAAC,GAAGR,YAAY,CAAC,CAAC,CAAC;MAC/D;IACJ;MACI;EACR;EAEAH,QAAQ,CAAC;IAAEY,IAAI,EAAE,aAAa;IAAEC,OAAO,EAAE;MAAEP,QAAQ,EAAEF;IAAY;EAAE,CAAC,CAAC;;EAErE;EACA,MAAMC,MAAM,GAAGS,QAAQ,CAACC,aAAa,CAAC,SAAS,CAAC;EAChD,IAAIV,MAAM,EAAE;IACRA,MAAM,CAACW,KAAK,CAACC,IAAI,GAAG,GAAGb,WAAW,CAACO,CAAC,IAAI;IACxCN,MAAM,CAACW,KAAK,CAACE,GAAG,GAAG,GAAGd,WAAW,CAACG,CAAC,IAAI;IACvCF,MAAM,CAACW,KAAK,CAACG,SAAS,GAAG,MAAM,CAAC,CAAC;EACrC;EAEAjB,UAAU,CAAC,gBAAgBD,GAAG,CAACmB,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC;AACxE,CAAC;AAED,OAAO,MAAMC,gBAAgB,GAAGA,CAACvB,KAAK,EAAEC,QAAQ,EAAEE,UAAU,KAAK;EAC7DqB,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;EACnC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}