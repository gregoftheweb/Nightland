{"ast":null,"code":"// nightland/src/modules/events.js\nexport function setupEventListeners(audio, statusBar, gameContainer, renderMap, movePlayer, combatStep, showPrincessScreen, startGame, showInfoBox, toggleSettings, toggleSFX, state) {\n  document.addEventListener('DOMContentLoaded', () => {\n    const splashButton = document.getElementById('splash-button');\n    splashButton.addEventListener('click', () => {\n      if (!state.audioStarted) {\n        audio.play().then(() => {\n          state.audioStarted = true;\n        }).catch(err => {});\n      }\n      showPrincessScreen(statusBar);\n    });\n    document.getElementById('princess-button').addEventListener('click', () => startGame(statusBar, gameContainer, renderMap));\n    document.getElementById('player').addEventListener('click', () => showInfoBox(state.player, infoBox));\n    document.getElementById('abhuman').addEventListener('click', () => {\n      var _state$abhuman;\n      return ((_state$abhuman = state.abhuman) === null || _state$abhuman === void 0 ? void 0 : _state$abhuman.active) && showInfoBox(state.abhuman, infoBox);\n    });\n    document.getElementById('watcher').addEventListener('click', () => showInfoBox(state.watcherSe, infoBox));\n    document.getElementById('redoubt').addEventListener('click', () => showInfoBox(state.redoubt, infoBox));\n    document.getElementById('gear-icon').addEventListener('click', event => {\n      toggleSettings(event);\n    });\n    const sfxToggle = document.getElementById('sfx-toggle');\n    if (sfxToggle) {\n      sfxToggle.addEventListener('change', () => {\n        toggleSFX();\n      });\n    }\n    document.addEventListener('keydown', event => {\n      console.log(\"Key pressed:\", event.key);\n      if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) {\n        event.preventDefault();\n        movePlayer(event.key);\n      } else if (event.key === ' ') {\n        event.preventDefault();\n        if (state.inCombat) {\n          combatStep();\n        } else {\n          document.getElementById('combat-player').style.display = 'none';\n          for (let i = 1; i <= 4; i++) {\n            const enemyDiv = document.getElementById(`combat-enemy${i}`);\n            if (enemyDiv) enemyDiv.style.display = 'none';\n          }\n        }\n      }\n    });\n  });\n}","map":{"version":3,"names":["setupEventListeners","audio","statusBar","gameContainer","renderMap","movePlayer","combatStep","showPrincessScreen","startGame","showInfoBox","toggleSettings","toggleSFX","state","document","addEventListener","splashButton","getElementById","audioStarted","play","then","catch","err","player","infoBox","_state$abhuman","abhuman","active","watcherSe","redoubt","event","sfxToggle","console","log","key","includes","preventDefault","inCombat","style","display","i","enemyDiv"],"sources":["/mnt/devplex/Nightland/nightland/src/modules/events.js"],"sourcesContent":["// nightland/src/modules/events.js\nexport function setupEventListeners(audio, statusBar, gameContainer, renderMap, movePlayer, combatStep, showPrincessScreen, startGame, showInfoBox, toggleSettings, toggleSFX, state) {\n    document.addEventListener('DOMContentLoaded', () => {\n        const splashButton = document.getElementById('splash-button');\n        splashButton.addEventListener('click', () => {\n            if (!state.audioStarted) {\n                audio.play().then(() => {\n                    state.audioStarted = true;\n                }).catch(err => {});\n            }\n            showPrincessScreen(statusBar);\n        });\n\n        document.getElementById('princess-button').addEventListener('click', () => startGame(statusBar, gameContainer, renderMap));\n\n        document.getElementById('player').addEventListener('click', () => showInfoBox(state.player, infoBox));\n        document.getElementById('abhuman').addEventListener('click', () => state.abhuman?.active && showInfoBox(state.abhuman, infoBox));\n        document.getElementById('watcher').addEventListener('click', () => showInfoBox(state.watcherSe, infoBox));\n        document.getElementById('redoubt').addEventListener('click', () => showInfoBox(state.redoubt, infoBox));\n        document.getElementById('gear-icon').addEventListener('click', (event) => {\n            toggleSettings(event);\n        });\n\n        const sfxToggle = document.getElementById('sfx-toggle');\n        if (sfxToggle) {\n            sfxToggle.addEventListener('change', () => {\n                toggleSFX();\n            });\n        }\n\n        document.addEventListener('keydown', (event) => {\n            console.log(\"Key pressed:\", event.key);\n            if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(event.key)) {\n                event.preventDefault();\n                movePlayer(event.key);\n            } else if (event.key === ' ') {\n                event.preventDefault();\n                if (state.inCombat) {\n                    combatStep();\n                } else {\n                    document.getElementById('combat-player').style.display = 'none';\n                    for (let i = 1; i <= 4; i++) {\n                        const enemyDiv = document.getElementById(`combat-enemy${i}`);\n                        if (enemyDiv) enemyDiv.style.display = 'none';\n                    }\n                }\n            }\n        });\n    });\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}